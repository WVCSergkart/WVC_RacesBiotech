<?xml version="1.0" encoding="utf-8" ?>
<Patch>

	<!-- ============================================================ -->

	<Operation Class="VFECore.PatchOperationToggableSequence">
		<enabled>False</enabled>
		<label>(WVC - Genes) Disable mechaskin graphic</label>
		<operations>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef[defName="WVC_MechaSkin"]/forcedHeadTypes</xpath>
				<success>Always</success>
			</li>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef[defName="WVC_MechaSkin"]/graphicData</xpath>
				<success>Always</success>
			</li>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef[defName="WVC_MechaSkin"]/modExtensions/li/furHidesBody</xpath>
				<success>Always</success>
			</li>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef[defName="WVC_MechaSkin"]/modExtensions/li/useSkinColorForFur</xpath>
				<success>Always</success>
			</li>
		</operations>
	</Operation>

	<Operation Class="VFECore.PatchOperationToggableSequence">
		<enabled>False</enabled>
		<label>(WVC - Genes) Disable mechanoidization mechanic</label>
		<operations>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef/statOffsets/WVC_PawnMechanoidization</xpath>
				<success>Always</success>
			</li>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef/conditionalStatAffecters/li/statOffsets/WVC_PawnMechanoidization</xpath>
				<success>Always</success>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/StatDef[defName="WVC_PawnMechanoidization"]/alwaysHide</xpath>
				<success>Always</success>
				<value>
					<alwaysHide>true</alwaysHide>
				</value>
			</li>
		</operations>
	</Operation>

	<Operation Class="VFECore.PatchOperationToggableSequence">
		<enabled>False</enabled>
		<label>(All gene mods) Use vanilla gene backgrounds</label>
		<operations>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef/modExtensions/li/backgroundPathXenogenes</xpath>
				<success>Always</success>
			</li>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef/modExtensions/li/backgroundPathEndogenes</xpath>
				<success>Always</success>
			</li>
		</operations>
	</Operation>

	<!-- ============================================================ -->

	<Operation Class="WVC.PatchOperationOptional">
		<settingName>disableFurGraphic</settingName>
		<caseTrue Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/GeneDef[defName="WVC_MechaSkin"]/forcedHeadTypes</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/GeneDef[defName="WVC_MechaSkin"]/graphicData</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/GeneDef[defName="WVC_MechaSkin"]/modExtensions/li/furHidesBody</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/GeneDef[defName="WVC_MechaSkin"]/modExtensions/li/useSkinColorForFur</xpath>
					<success>Always</success>
				</li>
			</operations>
		</caseTrue>
		<!-- <caseFalse Class="PatchOperationSequence"> -->
			<!-- <operations> -->
			<!-- </operations> -->
		<!-- </caseFalse> -->
	</Operation>

	<Operation Class="WVC.PatchOperationOptional">
		<settingName>disableMechanoidizationMechanic</settingName>
		<caseTrue Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/GeneDef/statOffsets/WVC_PawnMechanoidization</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/GeneDef/conditionalStatAffecters/li/statOffsets/WVC_PawnMechanoidization</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/StatDef[defName="WVC_PawnMechanoidization"]/alwaysHide</xpath>
					<success>Always</success>
					<value>
						<alwaysHide>true</alwaysHide>
					</value>
				</li>
			</operations>
		</caseTrue>
		<!-- <caseFalse Class="PatchOperationSequence"> -->
			<!-- <operations> -->
			<!-- </operations> -->
		<!-- </caseFalse> -->
	</Operation>

	<Operation Class="WVC.PatchOperationOptional">
		<settingName>mecaXenotypeIsInheritable</settingName>
		<caseTrue Class="PatchOperationReplace">
			<xpath>/Defs/XenotypeDef[defName="WVC_Meca"]/inheritable</xpath>
			<success>Always</success>
			<value>
				<inheritable>true</inheritable>
			</value>
		</caseTrue>
	</Operation>

	<!-- ============================================================ -->

	<Operation Class="WVC.PatchOperationOptional">
		<settingName>mechanoidizationGenesPatch</settingName>
		<caseTrue Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/GeneDef[defName="Learning_Slow"]/statFactors</xpath>
					<success>Always</success>
					<value>
						<conditionalStatAffecters>
						  <li Class="WVC.ConditionalStatAffecter_OperatingSystem">
							<statOffsets>
							  <WVC_PawnMechanoidization>2</WVC_PawnMechanoidization>
							</statOffsets>
							<statFactors>
							  <GlobalLearningFactor>0.8</GlobalLearningFactor>
							</statFactors>
						  </li>
						  <li Class="WVC.ConditionalStatAffecter_NonOperatingSystem">
							<statFactors>
							  <GlobalLearningFactor>0.5</GlobalLearningFactor>
							</statFactors>
						  </li>
						</conditionalStatAffecters>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/GeneDef[defName="Instability_Mild"]/statFactors</xpath>
					<success>Always</success>
					<value>
						<conditionalStatAffecters>
						  <li Class="WVC.ConditionalStatAffecter_Mechalike">
							<statOffsets>
							  <WVC_PawnMechanoidization>11</WVC_PawnMechanoidization>
							</statOffsets>
						  </li>
						  <li Class="WVC.ConditionalStatAffecter_Humanlike">
							<statFactors>
							  <LifespanFactor>0.8</LifespanFactor>
							  <CancerRate>3</CancerRate>
							  <ImmunityGainSpeed>0.96</ImmunityGainSpeed>
							</statFactors>
						  </li>
						</conditionalStatAffecters>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/GeneDef[defName="Instability_Major"]/statFactors</xpath>
					<success>Always</success>
					<value>
						<conditionalStatAffecters>
						  <li Class="WVC.ConditionalStatAffecter_Mechalike">
							<statOffsets>
							  <WVC_PawnMechanoidization>16</WVC_PawnMechanoidization>
							</statOffsets>
						  </li>
						  <li Class="WVC.ConditionalStatAffecter_Humanlike">
							<statFactors>
							  <LifespanFactor>0.6</LifespanFactor>
							  <CancerRate>5</CancerRate>
							  <ImmunityGainSpeed>0.92</ImmunityGainSpeed>
							</statFactors>
						  </li>
						</conditionalStatAffecters>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/GeneDef[defName="Inbred"]/statFactors</xpath>
					<success>Always</success>
					<value>
						<conditionalStatAffecters>
						  <li Class="WVC.ConditionalStatAffecter_Mechalike">
							<statFactors>
							  <Fertility>0.2</Fertility>
							</statFactors>
							<statOffsets>
							  <WVC_PawnMechanoidization>6</WVC_PawnMechanoidization>
							</statOffsets>
						  </li>
						  <li Class="WVC.ConditionalStatAffecter_Humanlike">
							<statFactors>
							  <Fertility>0.5</Fertility>
							  <ImmunityGainSpeed>0.85</ImmunityGainSpeed>
							</statFactors>
						  </li>
						</conditionalStatAffecters>
					</value>
				</li>
			</operations>
		</caseTrue>
	</Operation>

	<!-- ============================================================ -->


</Patch>