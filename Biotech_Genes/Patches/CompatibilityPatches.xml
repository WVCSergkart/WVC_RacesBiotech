<?xml version="1.0" encoding="utf-8" ?>
<Patch>

	<!-- ============================================================ -->

	<Operation Class="VFECore.PatchOperationToggableSequence">
		<enabled>False</enabled>
		<label>(WVC - Genes) Disable mechaskin graphic</label>
		<operations>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef[defName="WVC_MechaSkin"]/forcedHeadTypes</xpath>
				<success>Always</success>
			</li>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef[defName="WVC_MechaSkin"]/graphicData</xpath>
				<success>Always</success>
			</li>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef[defName="WVC_MechaSkin"]/modExtensions/li/furHidesBody</xpath>
				<success>Always</success>
			</li>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef[defName="WVC_MechaSkin"]/modExtensions/li/useSkinColorForFur</xpath>
				<success>Always</success>
			</li>
		</operations>
	</Operation>

	<Operation Class="VFECore.PatchOperationToggableSequence">
		<enabled>False</enabled>
		<label>(WVC - Genes) Disable mechanoidization mechanic</label>
		<operations>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef/statOffsets/WVC_PawnMechanoidization</xpath>
				<success>Always</success>
			</li>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef/conditionalStatAffecters/li/statOffsets/WVC_PawnMechanoidization</xpath>
				<success>Always</success>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/StatDef[defName="WVC_PawnMechanoidization"]/alwaysHide</xpath>
				<success>Always</success>
				<value>
					<alwaysHide>true</alwaysHide>
				</value>
			</li>
		</operations>
	</Operation>

	<Operation Class="VFECore.PatchOperationToggableSequence">
		<enabled>False</enabled>
		<label>(All gene mods) Use vanilla gene backgrounds</label>
		<operations>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef/modExtensions/li/backgroundPathXenogenes</xpath>
				<success>Always</success>
			</li>
			<li Class="PatchOperationRemove">
				<xpath>/Defs/GeneDef/modExtensions/li/backgroundPathEndogenes</xpath>
				<success>Always</success>
			</li>
		</operations>
	</Operation>

	<!-- ============================================================ -->

	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Beauty Matters</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/GeneDef[defName="WVC_MecaUpgrades_PerfectShape"]/statOffsets/PawnBeauty</xpath>
					<success>Always</success>
					<value>
						<PawnBeauty>2</PawnBeauty>
					</value>
				</li>
			</operations>
		</match>
	</Operation>

	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Alpha Genes</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/GeneDef[@Name="WVC_NaturalArmorBase"]/displayCategory</xpath>
					<success>Always</success>
					<value>
						<displayCategory>AG_Armour</displayCategory>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/GeneDef[@Name="WVC_MonogenderBase"]/displayCategory</xpath>
					<success>Always</success>
					<value>
						<displayCategory>AG_Gender</displayCategory>
					</value>
				</li>
				<!-- <li Class="PatchOperationAdd"> -->
					<!-- <xpath>Defs/GeneDef[@ParentName="WVC_MonogenderBase"]/modExtensions/li[@Class="VanillaGenesExpanded.GeneExtension"]</xpath> -->
					<!-- <value> -->
						<!-- <hideGene>true</hideGene> -->
					<!-- </value> -->
				<!-- </li> -->
				<li Class="PatchOperationReplace">
					<xpath>/Defs/GeneDef[defName="AG_Instability_Lethal"]/statFactors</xpath>
					<success>Always</success>
					<value>
						<conditionalStatAffecters>
						  <li Class="WVC.ConditionalStatAffecter_Mechalike">
							<statOffsets>
							  <WVC_PawnMechanoidization>25</WVC_PawnMechanoidization>
							</statOffsets>
						  </li>
						  <li Class="WVC.ConditionalStatAffecter_Humanlike">
							<statFactors>
								<CancerRate>7</CancerRate>
								<ImmunityGainSpeed>0.85</ImmunityGainSpeed>
							</statFactors>
						  </li>
						</conditionalStatAffecters>
					</value>
				</li>
			</operations>
		</match>
	</Operation>

	<!-- ============================================================ -->

	<!-- <Operation Class="PatchOperationSequence"> -->
	  <!-- <success>Always</success> -->
	  <!-- <operations> -->
		<!-- <li Class="PatchOperationReplace"> -->
		  <!-- <xpath>/Defs/GeneDef[defName="Furskin"]/displayCategory</xpath> -->
		  <!-- <success>Invert</success> -->
		  <!-- <value> -->
			<!-- <displayCategory>WVC_FurskinBody</displayCategory> -->
		  <!-- </value> -->
		<!-- </li> -->
		<!-- <li Class="PatchOperationAdd"> -->
		  <!-- <xpath>/Defs/MechWorkModeDef[defName="Work"]</xpath> -->
		  <!-- <success>Always</success> -->
		  <!-- <value> -->
			<!-- <uiOrder>100</uiOrder> -->
		  <!-- </value> -->
		<!-- </li> -->
	  <!-- </operations> -->
	<!-- </Operation> -->

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/GeneDef[defName="Furskin"]/displayCategory</xpath>
		<success>Always</success>
		<value>
			<displayCategory>WVC_FurskinBody</displayCategory>
		</value>
	</Operation>
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/GeneDef[defName="Furskin"]/displayOrderInCategory</xpath>
		<success>Always</success>
		<value>
			<displayOrderInCategory>-100</displayOrderInCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>/Defs/StatDef[defName="MentalBreakThreshold"]/minValue</xpath>
		<success>Always</success>
		<value>
			<minValue>0</minValue>
		</value>
	</Operation>

	<!-- <Operation Class="PatchOperationSequence"> -->
	  <!-- <success>Always</success> -->
	  <!-- <operations> -->
		<!-- <li Class="PatchOperationReplace"> -->
		  <!-- <xpath>/Defs/GeneDef[defName="Furskin"]/displayCategory</xpath> -->
		  <!-- <success>Invert</success> -->
		  <!-- <value> -->
			<!-- <displayCategory>WVC_FurskinBody</displayCategory> -->
		  <!-- </value> -->
		<!-- </li> -->
		<!-- <li Class="PatchOperationAdd"> -->
		  <!-- <xpath>/Defs/MechWorkModeDef[defName="Work"]</xpath> -->
		  <!-- <success>Always</success> -->
		  <!-- <value> -->
			<!-- <uiOrder>100</uiOrder> -->
		  <!-- </value> -->
		<!-- </li> -->
	  <!-- </operations> -->
	<!-- </Operation> -->

	<Operation Class="PatchOperationReplace">
		<xpath>/Defs/GeneDef[defName="Learning_Slow"]/statFactors</xpath>
		<success>Always</success>
		<value>
			<conditionalStatAffecters>
			  <li Class="WVC.ConditionalStatAffecter_OperatingSystem">
				<statOffsets>
				  <WVC_PawnMechanoidization>2</WVC_PawnMechanoidization>
				</statOffsets>
				<statFactors>
				  <GlobalLearningFactor>0.8</GlobalLearningFactor>
				</statFactors>
			  </li>
			  <li Class="WVC.ConditionalStatAffecter_NonOperatingSystem">
				<statFactors>
				  <GlobalLearningFactor>0.5</GlobalLearningFactor>
				</statFactors>
			  </li>
			</conditionalStatAffecters>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>/Defs/GeneDef[defName="Instability_Mild"]/statFactors</xpath>
		<success>Always</success>
		<value>
			<conditionalStatAffecters>
			  <li Class="WVC.ConditionalStatAffecter_Mechalike">
				<statOffsets>
				  <WVC_PawnMechanoidization>11</WVC_PawnMechanoidization>
				</statOffsets>
			  </li>
			  <li Class="WVC.ConditionalStatAffecter_Humanlike">
				<statFactors>
				  <LifespanFactor>0.8</LifespanFactor>
				  <CancerRate>3</CancerRate>
				  <ImmunityGainSpeed>0.96</ImmunityGainSpeed>
				</statFactors>
			  </li>
			</conditionalStatAffecters>
		</value>
	</Operation>
	<Operation Class="PatchOperationReplace">
		<xpath>/Defs/GeneDef[defName="Instability_Major"]/statFactors</xpath>
		<success>Always</success>
		<value>
			<conditionalStatAffecters>
			  <li Class="WVC.ConditionalStatAffecter_Mechalike">
				<statOffsets>
				  <WVC_PawnMechanoidization>16</WVC_PawnMechanoidization>
				</statOffsets>
			  </li>
			  <li Class="WVC.ConditionalStatAffecter_Humanlike">
				<statFactors>
				  <LifespanFactor>0.6</LifespanFactor>
				  <CancerRate>5</CancerRate>
				  <ImmunityGainSpeed>0.92</ImmunityGainSpeed>
				</statFactors>
			  </li>
			</conditionalStatAffecters>
		</value>
	</Operation>

	<!-- <Operation Class="PatchOperationAdd"> -->
		<!-- <xpath>/Defs/GeneDef[description[contains(text(),'is increased by 20. Aptitude')]]</xpath> -->
		<!-- <value> -->
			<!-- <biostatArc>2</biostatArc> -->
		<!-- </value> -->
	<!-- </Operation> -->
	<!-- <Operation Class="PatchOperationAdd"> -->
		<!-- <xpath>/Defs/GeneDef[description[contains(text(),'is reduced by 20. Aptitude')]]</xpath> -->
		<!-- <value> -->
			<!-- <biostatArc>1</biostatArc> -->
		<!-- </value> -->
	<!-- </Operation> -->

	<!-- <Operation Class="PatchOperationSequence"> -->
	  <!-- <success>Always</success> -->
	  <!-- <operations> -->
		<!-- <li Class="PatchOperationReplace"> -->
		  <!-- <xpath>/Defs/ThoughtDef[defName="TranshumanistAppreciation"]/nullifyingGenes</xpath> -->
		  <!-- <success>Invert</success> -->
		  <!-- <value> -->
			  <!-- <li MayRequire="Ludeon.RimWorld.Biotech">WVC_MechaSkin</li> -->
		  <!-- </value> -->
		<!-- </li> -->
		<!-- <li Class="PatchOperationAdd"> -->
		  <!-- <xpath>/Defs/ThoughtDef[defName="TranshumanistAppreciation"]</xpath> -->
		  <!-- <success>Always</success> -->
		  <!-- <value> -->
			<!-- <nullifyingGenes> -->
			  <!-- <li MayRequire="Ludeon.RimWorld.Biotech">WVC_MechaSkin</li> -->
			<!-- </nullifyingGenes> -->
		  <!-- </value> -->
		<!-- </li> -->
	  <!-- </operations> -->
	<!-- </Operation> -->

</Patch>