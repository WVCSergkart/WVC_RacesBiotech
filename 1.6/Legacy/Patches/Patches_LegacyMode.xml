<?xml version="1.0" encoding="utf-8" ?>
<Patch>

	<Operation Class="WVC_XenotypesAndGenes.PatchOperationLegacyMode">
		<caseFalse Class="PatchOperationSequence">
			<operations>

				<li Class="PatchOperationRemove">
					<xpath>/Defs/TraderKindDef[@WVC_Legacy_Hook="RemoveMe"]</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/ThingDef[@WVC_Legacy_Hook="RemoveMe"]</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/RecipeDef[@WVC_Legacy_Hook="RemoveMe"]</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/RulePackDef[@WVC_Legacy_Hook="RemoveMe"]</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/ResearchProjectDef[@WVC_Legacy_Hook="RemoveMe"]</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/FleckDef[@WVC_Legacy_Hook="RemoveMe"]</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/EffecterDef[@WVC_Legacy_Hook="RemoveMe"]</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/GeneDef[@WVC_Legacy_Hook="RemoveMe"]</xpath>
					<success>Always</success>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/ThingCategoryDef[@WVC_Legacy_Hook="RemoveMe"]</xpath>
					<success>Always</success>
				</li>

			</operations>
		</caseFalse>
		<caseTrue Class="WVC_XenotypesAndGenes.PatchOperationOptional">
			<settingName>onlyXenotypesMode</settingName>
			<caseTrue Class="PatchOperationSequence">
				<operations>

					<li Class="PatchOperationRemove">
						<xpath>/Defs/TraderKindDef[defName="WVC_Orbital_GenePackTrader"]</xpath>
						<success>Always</success>
					</li>

					<li Class="PatchOperationRemove">
						<xpath>/Defs/ThingDef[@WVC_XaG_Tag_Genepacks="AllGenePacks" or @WVC_XaG_Tag_Genepacks="All_XaG_GeneticThings" or @WVC_XaG_Tag_Genepacks="All_XaG_RewardThings"]/thingSetMakerTags</xpath>
						<success>Always</success>
					</li>
					<li Class="PatchOperationRemove">
						<xpath>/Defs/ThingDef[@WVC_XaG_Tag_Genepacks="AllGenePacks" or @WVC_XaG_Tag_Genepacks="All_XaG_GeneticThings" or @WVC_XaG_Tag_Genepacks="All_XaG_RewardThings"]/techHediffsTags</xpath>
						<success>Always</success>
					</li>
					<li Class="PatchOperationReplace">
						<xpath>/Defs/ThingDef[@WVC_XaG_Tag_Genepacks="AllGenePacks" or @WVC_XaG_Tag_Genepacks="All_XaG_GeneticThings" or @WVC_XaG_Tag_Genepacks="All_XaG_RewardThings"]/tradeTags</xpath>
						<success>Always</success>
						<value>
						  <tradeTags>
							<li>ExoticMisc</li>
						  </tradeTags>
						</value>
					</li>
					<li Class="PatchOperationReplace">
						<xpath>/Defs/ThingDef[@WVC_XaG_Tag_Genepacks="AllGenePacks" or @WVC_XaG_Tag_Genepacks="All_XaG_GeneticThings" or @WVC_XaG_Tag_Genepacks="All_XaG_RewardThings"]/tradeability</xpath>
						<success>Always</success>
						<value>
						  <tradeability>Sellable</tradeability>
						</value>
					</li>

				</operations>
			</caseTrue>
			<caseFalse Class="PatchOperationSequence">
				<operations>

					<li Class="PatchOperationAdd">
					  <xpath>/Defs/TraderKindDef/stockGenerators[li[thingDef="Genepack"]]</xpath>
					  <value>
						  <li Class="StockGenerator_Tag">
							<tradeTag>WVC_GenePacks</tradeTag>
							<thingDefCountRange>0~3</thingDefCountRange>
							<countRange>1~1</countRange>
						  </li>
					  </value>
					</li>

					<li Class="PatchOperationAdd">
					  <xpath>/Defs/TraderKindDef/stockGenerators[li[thingDef="Genepack"]]</xpath>
					  <value>
						  <li Class="StockGenerator_Tag">
							<tradeTag>WVC_XenotypeSerums_NonCraftable</tradeTag>
							<thingDefCountRange>0~2</thingDefCountRange>
							<countRange>1~1</countRange>
						  </li>
					  </value>
					</li>

				</operations>
			</caseFalse>
		</caseTrue>
	</Operation>

</Patch>